<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  
  <title><%= yield :head %></title>
  
  <script>
  
	  	// Wix job
	    <% if params[:job_id].to_i == 100 || params[:job_id].to_i == 164 %>
	    
	      var images = Array("../images/customers/wix/1.jpg", "../images/customers/wix/2.jpg");
	      
	    // Citi job
	    <% elsif params[:job_id].to_i == 215 || params[:job_id].to_i == 112 %>
	    
	      var images = Array(
	      	"../uploads/citi/MWSnap202.png",
	      	"../uploads/citi/MWSnap203-2.png",
	      	"../uploads/citi/MWSnap204-2.png",
	      	"../uploads/citi/MWSnap205.png");
	      
	    <% end %>

	  var currimg = 0;
  </script>

  
  <!-- ----------------- CSS ----------------- -->
  
  <%= stylesheet_link_tag 'ui_layout/layout-default-latest' %>
  <%= stylesheet_link_tag 'jquery-ui/jquery-ui-1.8.20.custom' %>
  
  <%= stylesheet_link_tag 'mvp-2' %>
  <%= stylesheet_link_tag 'mvp-fs_profile' %>
  <%= stylesheet_link_tag 'mvp-fs_profile_choose_skills' %>
  
  
  <!-- ----------------- JAVASCRIPT ----------------- -->
  
  <%= javascript_include_tag 'jquery-1.7.2.min' %>
  <%= javascript_include_tag 'jquery-ui/jquery-ui-1.8.20.custom.min' %>
  <%= javascript_include_tag 'ui_layout/jquery.layout-latest.min.js' %>
  
  
  <!-- ----------------- COMPONENTS ----------------- -->

	  
	  <!-- --------- Google Analytics --------- -->

	  <%= render :partial => '/js/framework/_google_analytics' %>
	  
	  
	  <!-- --------- Show loading --------- -->
  
	  <%= stylesheet_link_tag 'showLoading/showLoading' %>
	  <%# javascript_include_tag 'showLoading/jquery.showLoading.min' %>
	  

	  <!-- --------- Nyro-Modal --------- -->
	  
	  <%= stylesheet_link_tag 'nyroModal/nyroModal' %>
	  <%= javascript_include_tag 'nyroModal/jquery.nyroModal.custom.min' %>
	  
	  <!--[if IE 6]>
	  	<%= javascript_include_tag 'nyroModal/jquery.nyroModal-ie6.min' %>
	  <![endif]-->


	  <!-- --------- BubbleTip --------- -->  
	  
	  <%= stylesheet_link_tag 'bubblepopup/jquery-bubble-popup-v3' %>
	  <%= javascript_include_tag 'bubblepopup/jquery-bubble-popup-v3.min' %>
	  
	  
	  <!-- --------- Impromptu --------- -->  
	  
	  <%= stylesheet_link_tag 'impromptu/jquery-impromptu' %>
	  <%= javascript_include_tag 'impromptu/jquery-impromptu' %>

	  
		  <!-- Impromptu instructions -->
		  
		  <script type="text/javascript">
		  	
		  	var tourSubmitFunc = function(e,v,m,f){
						if(v === -1){
							$.prompt.prevState();
							return false;
						}
						else if(v === 1){
							$.prompt.nextState();
							return false;
						}
			},
			tourStates = [
				{
					title: 'What is 5skills?',
					html: '5skills is your simplest and anonymous reverse job seeking platform based on your skills.' + 
						'<br/><br/>You only need to do 2 things.' + 
						'<br/>(1) Create a simple job seeking profile based on your skills' +
						'<br/>(2) Wait while Employers find you and offer you jobs you really want :-)' +
						'<br/><br/><span style="font-style:italic;">Let\'s get started! Let\'s create my profile.</span>',  
					buttons: { Skip: 2, Next: 1 },
					focus: 1,
					submit: tourSubmitFunc
				},
				{
					title: 'Step 1. Add skills',
					html: 'Look to find skills you might have from the \'Common skills\' list.' + 
						'<br/><br/>Click on a skill and get it into your profile.',
					buttons: { Next: 1 },
					focus: 1,
					position: { container: '.add_skill_panel_body', x: 230, y: 0, width: 300, arrow: 'lt' },
					submit: tourSubmitFunc
				},
				{
					title: 'Step 2. Add years experience',
					html: 'Type in the number of years experience you have for each skill you added.',
					buttons: { Prev: -1, Next: 1 },
					focus: 1,
					position: { container: '#skill_1_yrs', x: 40, y: -15, width: 300, arrow: 'lt' },
					submit: tourSubmitFunc
				},
				{
					title: 'Step 3. Add additional skills',
					html: 'In case you have skills that don\'t appear in the \'Common skills\' list, manually add skills to your profile.' +
						'<br/><br/>Click on a skill and start typing your skill. We will suggest skills as you start typing.',
					buttons: { Prev: -1, Next: 1 },
					focus: 1,
					position: { container: '#skill_2_yrs', x: 40, y: -15, width: 300, arrow: 'lt' },
					submit: tourSubmitFunc
				},
				{
					title: 'Step 4. Hit \'Apply\'',
					html: 'Once you\'re done, hit the \'Apply\' button',
					buttons: { Prev: -1, Done: 2 },
					focus: 1,
					position: { container: '#btn_check_match', x: 180, y: 10, width: 300, arrow: 'lt' },
					submit: tourSubmitFunc
				}
			];
			
		   </script>
	  
	  
	  <!-- --------- AutoComplete --------- -->
	  
	   <style>
		  .ui-autocomplete {
		    max-height: 200px;
		    overflow-y: auto;
		    /* prevent horizontal scrollbar */
		    overflow-x: hidden;
		  }
		  /* IE 6 doesn't support max-height
		   * we use height instead, but this forces the menu to always be this tall
		   */
		  * html .ui-autocomplete {
		    height: 200px;
		  }
	  </style>
  
  
  <!-- ----------------- FRAMEWORK ----------------- -->

  <%= render :partial => '/js/framework/_ajax' %>
  <%= render :partial => '/js/framework/_ajax_functions' %>
  <%= render :partial => '/js/framework/_event_handlers' %>
  <%= render :partial => '/js/framework/_global_variables' %>
  <%= render :partial => '/js/framework/_util' %>
  
  
  <!-- ----------------- ajax functions ----------------- -->
  
  <%= render :partial => '/js/ajax/_fs_profile' %>
  <%= render :partial => '/js/ajax/_apply_to_job_post' %>
  
  
  <!-- ----------------- utilities functions ----------------- -->
  
  <!-- Includes the 'bind_field' method which does the 'autocomplete' functionality -->
  <%= render :partial => '/js/util/_fs_profile' %>
  <%= render :partial => '/js/util/_fs_profile_add_skills' %>
  
  
  <!-- ----------------- binders functions ----------------- -->
  
  <%= render :partial => '/js/binders/_fs_profile' %>
  <%= render :partial => '/js/binders/_fs_profile_add_skills' %>
  <%= render :partial => '/js/binders/_apply_to_job_post' %>
  
  
	<script type="text/javascript">
		$(document).ready(function() {
			
			$.ajaxSetup({
			    beforeSend: function (xhr) {
			    	// Add the 'json' header
			        xhr.setRequestHeader("Accept", "application/json, text/javascript, text/html, application/xml, text/xml, */*");
			        
			        // Store the request
			        //xhrPool[ajax_current_action] = xhr;
			    }
			});
			
			<%= render :partial => '/five_skills/_site_header_js_binders' %>
			
			<%= render :partial => '/js/onload/_fs_profile' %>
			<%= render :partial => '/js/onload/_fs_profile_add_skills' %>
			
			<%= render :partial => '/js/framework/_onload_post_components' %>
			
			
			// -- 1 - configure the 'add_sills' template
			
			$(".skills_profile_top_5:last").remove(); // Remove 'template' -> supporting new framework
			$(".add_skill_panel_body div:first").hide(); // Hide 'add_skills' header
			$("#btn_close_skills_panel").hide(); // Hide '<<' button
			$("#_add_skills").show();
			
			
			// -- 1 - !* TEMP: 'show()' the fs_profile template,
			//  .. New framework dynamically adds the 'fs_profile' template
			
			$("#btn_add_skills_panel").hide(); // Hide '+' and 'C' buttons
			$("#template__fs_profile:first").show();
			
			
			// -- 2 - !* TEMP: Populate the 5skills template
			
			<% 5.times do |i| %>
				
				// --- IF FS_PROFILE EXISTS, USE IT
				
				<% if @active_fs_profile %>
				
					// --- Populate primary skills
					
					<% if @active_fs_profile[:skill_names_matrix][i] && !@active_fs_profile[:skill_names_matrix][i][0].blank? %>
					
						$(".skills_profile_top_5").append(create_primary_skill(
								<%= (i + 1) %>, {
									id: "<%= @active_fs_profile[:skill_ids_matrix][i][0] %>",
									name: "<%= @active_fs_profile[:skill_names_matrix][i][0] %>",
									years_exp: "<%= @active_fs_profile[:skill_names_matrix][i][1] %>"
									
									<% if @active_fs_profile[:skill_ids_matches_matrix] %>
									
										<% if @active_fs_profile[:skill_ids_matches_matrix][i][0] == -2 %>
											, name_state: 2
										<% end %>
										
										<% if @active_fs_profile[:skill_ids_matches_matrix][i][1] == -2 %>
											, years_exp_state: 2
										<% end %>
										
									<% end %>
								},
								true));
								
						attach_primary_field_binders(<%= (i + 1) %>);
					
					<% else %>
					
						$(".skills_profile_top_5").append(create_blank_primary_skill(<%= i + 1 %>));
				
						attach_primary_field_binders(<%= (i + 1) %>, true);
					
					<% end %>
				
				
					// --- Populate secondary skills
					
					<% if @active_fs_profile[:skill_ids_matrix] && @active_fs_profile[:skill_ids_matrix][i] && @active_fs_profile[:skill_ids_matrix][i][2] %>
						
						<% @active_fs_profile[:skill_ids_matrix][i][2].each_index do |j| %>
							add_sub_skill(
								<%= @active_fs_profile[:skill_ids_matrix][i][2][j] %>, 
								"<%= @active_fs_profile[:skill_names_matrix][i][2][j] %>", 
								$("#sortable<%= i * 2 + 2 %>"));
						<% end %>
						
					<% end %>
				
				
				// --- IF FS_PROFILE DOES NOT EXIST, DISPLAY BLANK PRIMARY SKILLS
				
				<% else %>
					
					$(".skills_profile_top_5").append(create_blank_primary_skill(<%= i + 1 %>));
					
					attach_primary_field_binders(<%= (i + 1) %>, true);
				
				<% end %>
				
				
				// --- Add 'add skill' field
				
				//add_add_sub_skill(<%= 0 - (i + 1) %>, $("#sortable<%= i * 2 + 2 %>"));
				
				<%# i = i + 2 %>
				
			<% end %>
			
		});
	</script>
    
</head>

<body style="background-color:#E5F9EE;">

	<%= render :partial => '/five_skills/_site_header' %>
			
	<%= yield %>
	
	<%= render :partial => '/five_skills/footer' %>

</body>
</html>


<!-- IFrame -->

<iframe id='upload_frame' name="upload_frame" style="width:1px;height:1px;border:0px;" src="about:blank"></iframe>


<!-- HTML Templates -->
	
<%= render :partial => '/js/framework/_templates' %>


<!-- Session IDs -->
	
<%= render :partial => '/js/html_template/_framework__session_ids' %>

