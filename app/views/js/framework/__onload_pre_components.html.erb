
// ---------------------- AJAX initialization ----------------------

$.ajaxSetup({
    beforeSend: function (xhr) {
    	// Add the 'json' header
        xhr.setRequestHeader("Accept", "application/json, text/javascript, text/html, application/xml, text/xml, */*");
        
        // Store the request
        //xhrPool[ajax_current_action] = xhr;
    }
});



// -- SYNC (_core & _skeleton)

sync();



panel__workspace = $('body').layout({ 
	name:					'panel__workspace' // for debugging & auto-adding buttons (see below)
,	north__paneSelector: 	'.header'
,	west__paneSelector: 	'.col1' 
,	center__paneSelector: 	'.col234' 
,	east__paneSelector: 	'.col5'

,	closable:					true	// pane can open & close
,	resizable:					true	// when open, pane can be resized 
,	slidable:					true	// when closed, pane can 'slide' open over other panes - closes on mouse-out
,	livePaneResizing:			true
,	minSize:				90
,	noRoomToOpenAction:		"hide" // 'close' or 'hide' when no room to open a pane at minSize
,	autoBindCustomButtons:	true

,	north__slidable:			false	// OVERRIDE the pane-default of 'slidable=true'
,	north__togglerLength_closed: '100%'	// toggle-button is full-width of resizer-bar
,	north__spacing_closed:		5		// big resizer-bar when open (zero height)
,	north__spacing_open:		0		// big resizer-bar when open (zero height)
,	north__resizable:		false		// big resizer-bar when open (zero height)
,	north__closable:		false		// big resizer-bar when open (zero height)
,	north__slidable:		false		// big resizer-bar when open (zero height)

,	center__minWidth:		239 // 3 x 75 (panes) + 2 x 6 (spacing) + 2 x 1 (center-border)
 
,	west__size: 			120		// percentage size expresses as a decimal
,	west__spacing_open:		0

,	east__size: 			120
,	east__spacing_open:		0

}); 


panel__fs_profile_choose_skills = panel__workspace.panes.center.layout({ 
	name:					'panel__fs_profile_choose_skills' // for debugging & auto-adding buttons (see below)
,	west__paneSelector: 	'.col2'
,	center__paneSelector: 	'.col3'

,	autoResize:				true	// try to maintain pane-percentages
,	closable:				true
,	togglerLength_open:		0	// hide toggler-buttons
,	spacing_closed:			0	// hide resizer/slider bar when closed
,	autoReopen:				true	// auto-open panes that were previously auto-closed due to 'no room'
,	autoBindCustomButtons:	true
//,	minSize:				75
, 	spacing_open: 0

//,	center__initClosed: 	true
//, 	center__spacing_closed: 0

, 	west__spacing_closed: 0
,	west__initClosed: 	true

,	west__size: 			'320'	// percentage size expresses as a string

}); 

panel__fs_profile = panel__fs_profile_choose_skills.panes.center.layout({ 
	name:					'panel__fs_profile' // for debugging & auto-adding buttons (see below)
,	west__paneSelector: 	'.aa'
,	center__paneSelector: 	'.bb'
,	east__paneSelector: 	'.cc'

,	autoResize:				true	// try to maintain pane-percentages
,	closable:				true
,	togglerLength_open:		0	// hide toggler-buttons
,	spacing_closed:			0	// hide resizer/slider bar when closed
,	autoReopen:				true	// auto-open panes that were previously auto-closed due to 'no room'
,	autoBindCustomButtons:	true
,	minSize:				0
, 	spacing_open: 0


//,	center__initClosed: 	true
// 	center__spacing_closed: 0

, 	west__spacing_closed: 0
,	west__initClosed: 	true
,	west__size: 			320 // percentage size expresses as a string

, 	east__spacing_closed: 0
,	east__initClosed: 	true
,	east__size: 			320 // percentage size expresses as a string

}); 






<% if flash[:notice] %>
	$("#message_notice").show('slow');
<% end %>

<% if flash[:error] %>
	$("#message_error").show('slow');
<% end %>


// ---------------------- Bindings ----------------------
bind_fields("__w__core");


// ---------------------- Prepare workspace ----------------------
switch_to("__w__core");


// ---------------------- Set 'default' main content type ----------------------
switch_to(context["workspace"]["_default"]);
